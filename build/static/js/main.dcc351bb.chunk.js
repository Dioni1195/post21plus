(this["webpackJsonppost21-front"]=this["webpackJsonppost21-front"]||[]).push([[0],{131:function(e,t,a){e.exports=a(542)},136:function(e,t,a){},52:function(e,t,a){},541:function(e,t,a){},542:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(136),a(40)),l=a(14),s=a(19),u=a.n(s),m=a(27),p=a(586),d=a(578),h=a(576),f=a(582),g=a(577),v=a(585),E=a(573),b=a(579),y=a(583),w=a(60),C=a.n(w),x=a(110),O=a(574),j=a(575),S=(a(52),a(12)),k=a(70),W=a(18),I=function(e){var t=Object(n.useState)({}),a=Object(W.a)(t,2),r=a[0],o=a[1];return{handleSubmit:function(t){t&&t.preventDefault(),e()},handleInputChange:function(e){e.persist(),o((function(t){return Object(k.a)(Object(k.a)({},t),{},Object(S.a)({},e.target.name,e.target.value))}))},inputs:r}},N=a(24),B=a.n(N),P=a(25),T=a.n(P),D=T()(B.a);function K(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(E.a,{color:"inherit",href:"https://material-ui.com/"},"Post-21"),"/",(new Date).getFullYear(),".")}var A=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function q(){var e=A(),t=Object(l.f)();function a(){return(a=Object(m.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=I((function(){try{(function(){return a.apply(this,arguments)})("https://post21plus.herokuapp.com/api/auth",o).then((function(e){"OK"===e.status?(console.log(e),localStorage.setItem("token",e.token),t.push("/feed")):D.fire({icon:"Check again :)",title:"Not a valid e-mail or password"})}))}catch(e){}})),o=n.inputs,i=n.handleInputChange,c=n.handleSubmit;return r.a.createElement(j.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(C.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,onSubmit:c,noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:i,value:o.email,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:i,value:o.password}),r.a.createElement(g.a,{control:r.a.createElement(v.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0},r.a.createElement(E.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(y.a,{mt:8},r.a.createElement(K,null)))}var R=T()(B.a);function F(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(E.a,{color:"inherit",href:"https://material-ui.com/"},"Post-21"),"/",(new Date).getFullYear(),".")}var J=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function M(){var e=J(),t=Object(l.f)();function a(){return(a=Object(m.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=I((function(){if(o.password===o.confirmPassword)try{(function(){return a.apply(this,arguments)})("https://post21plus.herokuapp.com/api/user",o).then((function(e){"OK"===e.status?(console.log(e),R.fire({icon:"success",title:"User created!",showConfirmButton:!1,timer:1500}),t.push("/")):R.fire({icon:"Check again :)",title:e.message})}))}catch(e){}else R.fire({icon:"error",title:"Check your password",showConfirmButton:!1,timer:1500})})),o=n.inputs,i=n.handleInputChange,c=n.handleSubmit;return r.a.createElement(j.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(C.a,null),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,onSubmit:c,validate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:i,value:o.email,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",onChange:i,value:o.name,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:i,value:o.password}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",onChange:i,value:o.confirmPassword}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0},r.a.createElement(E.a,{href:"/",variant:"body2"},"Do you have an account? Sign In"))))),r.a.createElement(y.a,{mt:8},r.a.createElement(F,null)))}var V=a(38),L=a.n(V);a(80).config();var U=a(81);U.config=new U.Config,U.config.accessKeyId="AKIAWBTM6OXBHSGJ3RPR",U.config.secretAccessKey="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",U.config.region="us-east-2",U.config.apiVersions={s3:"2006-03-01"};var X=T()(B.a);function G(){var e=Object(n.useState)(""),t=Object(W.a)(e,2),a=t[0],o=t[1];function i(){return(i=Object(m.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=I((function(){!function(e){new U.S3.ManagedUpload({params:{Bucket:"dionibucket",Key:e.name,Body:e,ACL:"public-read"}}).promise().then((function(e){console.log("Successfully uploaded photo.")}),(function(e){console.log("There was an error uploading your photo: ",e.message)}))}(a);try{l.token=localStorage.getItem("token"),function(){return i.apply(this,arguments)}("https://post21plus.herokuapp.com/api/user/post",l).then((function(e){"OK"===e.status?(console.log(e),X.fire({icon:"success",title:e.message,showConfirmButton:!1,timer:1500})):X.fire({icon:"Something is worng :(",title:e.message}),l.title="",l.content="",l.file={}}))}catch(e){}})),l=c.inputs,s=c.handleInputChange,p=c.handleSubmit;return r.a.createElement(j.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(x.a,{component:"h4",variant:"h5"},"Upload the image")),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement("input",{type:"file",id:"file",name:"file",accept:"image/png, image/jpeg",onChange:function(e){o(e.target.files[0]);var t=L()(localStorage.getItem("token")).email;l.email=t,l.image=e.target.files[0].name,l.file=e.target.files[0]}}),r.a.createElement("form",{onSubmit:p},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Title",name:"title",onChange:s,value:l.title,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"content",label:"Content",name:"content",onChange:s,value:l.content,multiline:!0}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Send!")))))}var H=a(544),Y=a(584),$=T()(B.a),_=Object(O.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"apx",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100px",maxHeight:"100px"}}}));a(80).config();var z=a(81);z.config=new z.Config,z.config.accessKeyId="AKIAWBTM6OXBHSGJ3RPR",z.config.secretAccessKey="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",z.config.region="us-east-2",z.config.apiVersions={s3:"2006-03-01"};var Q=new z.S3;function Z(e){var t={Bucket:"dionibucket",Key:e},a=Q.getSignedUrl("getObject",t);return console.log("The URL is",a),a}function ee(e){var t=Object(n.useState)({pages:[1,1]}),a=Object(W.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)([]),l=Object(W.a)(c,2),s=l[0],p=l[1];function h(){return(h=Object(m.a)(u.a.mark((function e(t,a){var n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=L()(localStorage.getItem("token")),r=n.id,i="https://post21plus.herokuapp.com/api/user/"+r+"/post/"+t,e.next=5,fetch(i,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 5:200===e.sent.status?(f(o.currentPage),$.fire({icon:"success",title:"Post deleted!",showConfirmButton:!1,timer:1500})):$.fire({icon:"error",title:"Ops! something is wrong",showConfirmButton:!1,timer:1500});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return(n=Object(m.a)(u.a.mark((function e(t){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=L()(localStorage.getItem("token")),n=a.id,r="https://post21plus.herokuapp.com/api/post/"+n+"/"+t,e.next=4,fetch(r);case 4:return o=e.sent,e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e){return n.apply(this,arguments)},e.next=4,a(t).then((function(e){var t=e.listPost,a=e.pageItems;i(t),p(a)}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=_(),E=s.map((function(e){return r.a.createElement(H.a,{className:v.paper},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0},r.a.createElement("img",{className:v.img,alt:"complex",src:Z(e.image)})),r.a.createElement(b.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(b.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(b.a,{item:!0,xs:!0},r.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},e.title),r.a.createElement(x.a,{variant:"body2",gutterBottom:!0},e.content)),r.a.createElement(b.a,{item:!0},r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{cursor:"pointer"},onClick:function(t){return function(e,t){return h.apply(this,arguments)}(e._id,t)}},"Delete!"))))))}));return r.a.createElement(j.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",null,E),r.a.createElement(Y.a,{hidePrevButton:!0,hideNextButton:!0,count:o.pages.length,page:"1",onChange:function(e,t){f(t)}}))}var te=a(580),ae=a(581),ne=Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),re=T()(B.a);function oe(){var e=Object(l.f)(),t=ne();return r.a.createElement("div",{className:t.root},r.a.createElement(te.a,{position:"static"},r.a.createElement(ae.a,null,r.a.createElement(x.a,{variant:"h6",className:t.title},"My posts!"),r.a.createElement(d.a,{edge:"end",color:"inherit",onClick:function(){re.fire({icon:"success",title:"We will miss you!",showConfirmButton:!1,timer:1500}),localStorage.clear(),e.push("/")}},"Log out"))),r.a.createElement(j.a,null,r.a.createElement(G,null),r.a.createElement(ee,null)))}var ie=a(62),ce=a(33),le=a(109),se=a(108),ue=(a(541),function(e){Object(le.a)(a,e);var t=Object(se.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).state={status:void 0},n}return Object(ce.a)(a,[{key:"componentDidMount",value:function(){try{var e=localStorage.getItem("token"),t=L()(e).exp,a=(t*=1e3)>=Date.now();this.setState({status:a})}catch(n){this.setState({status:!1})}}},{key:"render",value:function(){return void 0===this.state.status?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):(!0!==this.state.status&&this.props.history.push("/"),this.props.children)}}]),a}(n.Component)),me=Object(l.g)(ue);var pe=function(){return r.a.createElement(c.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:q}),r.a.createElement(l.a,{path:"/signup",component:M}),r.a.createElement(me,null,r.a.createElement(l.a,{path:"/feed",component:oe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.dcc351bb.chunk.js.map