(this["webpackJsonppost21-front"]=this["webpackJsonppost21-front"]||[]).push([[0],{115:function(e,t,a){e.exports=a(525)},120:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(120),a(49)),l=a(13),s=a(35),u=a.n(s),m=a(50),p=a(574),d=a(569),h=a(567),f=a(571),g=a(568),v=a(573),E=a(564),S=a(570),b=a(572),O=a(100),y=a.n(O),C=a(103),_=a(565),T=a(566),w=(a(71),a(14)),j=a(64),k=a(20),W=function(e){var t=Object(n.useState)({}),a=Object(k.a)(t,2),r=a[0],o=a[1];return{handleSubmit:function(t){t&&t.preventDefault(),e()},handleInputChange:function(e){e.persist(),o((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(w.a)({},e.target.name,e.target.value))}))},inputs:r}},x=a(43),D=a.n(x),P=a(44),I=a.n(P),K=I()(D.a);function N(){return r.a.createElement(C.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(E.a,{color:"inherit",href:"https://material-ui.com/"},"Post-21"),"/",(new Date).getFullYear(),".")}var A=Object(_.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function R(){var e=A(),t=Object(l.f)();function a(){return(a=Object(m.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=W((function(){try{(function(){return a.apply(this,arguments)})("https://post21plus.herokuapp.com/api/auth",o).then((function(e){"OK"===e.status?(console.log(e),localStorage.setItem("token",e.token),t.push("/feed")):K.fire({icon:"Check again :)",title:"Not a valid e-mail or password"})}))}catch(e){}})),o=n.inputs,i=n.handleInputChange,c=n.handleSubmit;return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(y.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,onSubmit:c,noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:i,value:o.email,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:i,value:o.password}),r.a.createElement(g.a,{control:r.a.createElement(v.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0},r.a.createElement(E.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(b.a,{mt:8},r.a.createElement(N,null)))}var U=a(45),B=a.n(U),L=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_S3_KEY,H=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_S3_SECRET,V=a(130);V.config=new V.Config,V.config.accessKeyId=L,V.config.secretAccessKey=H,V.config.region="us-east-2",V.config.apiVersions={s3:"2006-03-01"},console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}));var q=I()(D.a);function J(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],o=t[1];function i(){return(i=Object(m.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=W((function(){!function(e){new V.S3.ManagedUpload({params:{Bucket:"dionibucket",Key:e.name,Body:e,ACL:"public-read"}}).promise().then((function(e){console.log("Successfully uploaded photo.")}),(function(e){return alert("There was an error uploading your photo: ",e.message)}))}(a);try{l.token=localStorage.getItem("token"),function(){return i.apply(this,arguments)}("https://post21plus.herokuapp.com/api/user/post",l).then((function(e){"OK"===e.status?(console.log(e),q.fire({icon:"success",title:e.message,showConfirmButton:!1,timer:1500})):q.fire({icon:"Something is worng :(",title:e.message})}))}catch(e){}})),l=c.inputs,s=c.handleInputChange,p=c.handleSubmit;return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(C.a,{component:"h4",variant:"h5"},"Upload the image")),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement("input",{type:"file",id:"file",name:"file",accept:"image/png, image/jpeg",onChange:function(e){o(e.target.files[0]);var t=B()(localStorage.getItem("token")).email;l.email=t,l.image=e.target.files[0].name}}),r.a.createElement("form",{onSubmit:p},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Title",name:"title",onChange:s,value:l.title,autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"content",label:"Content",name:"content",onChange:s,value:l.content,multiline:!0}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Send!")))))}function F(){return r.a.createElement(J,null)}var M=a(57),Y=a(29),$=a(102),z=a(101),G=(a(524),function(e){Object($.a)(a,e);var t=Object(z.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={status:void 0},n}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){try{var e=localStorage.getItem("token"),t=B()(e).exp,a=(t*=1e3)>=Date.now();this.setState({status:a})}catch(n){this.setState({status:!1})}}},{key:"render",value:function(){return void 0===this.state.status?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):(!0!==this.state.status&&this.props.history.push("/"),this.props.children)}}]),a}(n.Component)),Q=Object(l.g)(G);var X=function(){return r.a.createElement(c.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:R}),r.a.createElement(Q,null,r.a.createElement(l.a,{path:"/feed",exact:!0,component:F}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t){},71:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.529528c7.chunk.js.map